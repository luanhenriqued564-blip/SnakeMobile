<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat com IA - Gerador de PWA</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
  color: #e6e6e6;
  min-height: 100vh;
  padding: 20px;
}

#setup, #chat {
  background: rgba(20, 20, 40, 0.9);
  border-radius: 20px;
  padding: 30px;
  max-width: 900px;
  width: 100%;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.1);
  margin: 0 auto;
}

#chat {
  display: none;
}

h1 {
  text-align: center;
  margin-bottom: 25px;
  font-size: 28px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

label {
  display: block;
  margin-top: 15px;
  margin-bottom: 5px;
  font-weight: 600;
  color: #a8b2d1;
  font-size: 14px;
}

input, textarea, select {
  width: 100%;
  padding: 12px 16px;
  border-radius: 10px;
  border: 2px solid rgba(102, 126, 234, 0.3);
  font-size: 15px;
  background: rgba(15, 15, 35, 0.6);
  color: #fff;
  transition: all 0.3s ease;
  font-family: 'Consolas', 'Monaco', monospace;
}

input:focus, textarea:focus, select:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

button {
  width: 100%;
  margin-top: 20px;
  padding: 14px;
  border-radius: 10px;
  border: none;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 1px;
}

button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.btn-secondary {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
  margin-top: 10px;
}

.btn-success {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  color: white;
  margin-top: 10px;
}

#messages {
  height: 450px;
  overflow-y: auto;
  padding: 15px;
  border-radius: 12px;
  background: rgba(10, 10, 25, 0.5);
  margin: 20px 0;
  border: 1px solid rgba(102, 126, 234, 0.2);
}

#messages::-webkit-scrollbar {
  width: 8px;
}

#messages::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 10px;
}

#messages::-webkit-scrollbar-thumb {
  background: #667eea;
  border-radius: 10px;
}

.msg {
  margin: 10px 0;
  padding: 10px 15px;
  border-radius: 10px;
  max-width: 80%;
  word-wrap: break-word;
}

.user {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  margin-left: auto;
  text-align: right;
}

.bot {
  background: rgba(253, 203, 110, 0.2);
  color: #ffeaa7;
  border-left: 3px solid #fdcb6e;
}

.system-msg {
  background: rgba(102, 126, 234, 0.2);
  color: #a8b2d1;
  border-left: 3px solid #667eea;
  font-size: 13px;
  font-style: italic;
  text-align: center;
  margin: 15px auto;
  max-width: 90%;
}

.code-block {
  position: relative;
  margin: 10px 0;
  border-radius: 8px;
  overflow: hidden;
}

.code-header {
  background: rgba(102, 126, 234, 0.3);
  padding: 8px 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(102, 126, 234, 0.5);
}

.code-lang {
  font-size: 12px;
  color: #a8b2d1;
  font-weight: 600;
  text-transform: uppercase;
}

.code-actions {
  display: flex;
  gap: 8px;
}

.copy-btn, .pwa-btn {
  background: rgba(102, 126, 234, 0.5);
  color: white;
  border: none;
  padding: 4px 12px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s;
}

.pwa-btn {
  background: rgba(56, 239, 125, 0.5);
}

.copy-btn:hover, .pwa-btn:hover {
  background: rgba(102, 126, 234, 0.8);
  transform: none;
}

.pwa-btn:hover {
  background: rgba(56, 239, 125, 0.8);
}

.code-content {
  background: rgba(15, 15, 35, 0.8);
  padding: 12px;
  overflow-x: auto;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 14px;
  line-height: 1.5;
  color: #e6e6e6;
}

.controls {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-top: 15px;
}

.controls button {
  margin-top: 0;
}

.pwa-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  overflow-y: auto;
  padding: 20px;
}

.pwa-modal.active {
  display: flex;
}

.pwa-modal-content {
  background: rgba(20, 20, 40, 0.95);
  border-radius: 20px;
  padding: 30px;
  max-width: 600px;
  width: 100%;
  border: 1px solid rgba(255, 255, 255, 0.1);
  max-height: 90vh;
  overflow-y: auto;
}

.pwa-modal h2 {
  color: #38ef7d;
  margin-bottom: 20px;
}

.pwa-modal input, .pwa-modal textarea {
  margin-bottom: 15px;
}

.color-picker {
  display: flex;
  gap: 10px;
  align-items: center;
}

.color-picker input[type="color"] {
  width: 60px;
  height: 40px;
  padding: 5px;
  cursor: pointer;
}

.pwa-modal .btn-row {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

.pwa-modal .btn-row button {
  margin-top: 0;
}

.progress-bar {
  width: 100%;
  height: 30px;
  background: rgba(15, 15, 35, 0.6);
  border-radius: 15px;
  overflow: hidden;
  margin: 15px 0;
  display: none;
}

.progress-bar.active {
  display: block;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #11998e 0%, #38ef7d 100%);
  width: 0%;
  transition: width 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 600;
  font-size: 12px;
}

.file-preview {
  background: rgba(15, 15, 35, 0.6);
  border-radius: 10px;
  padding: 15px;
  margin-top: 15px;
  display: none;
}

.file-preview.active {
  display: block;
}

.file-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: rgba(102, 126, 234, 0.2);
  border-radius: 8px;
  margin-bottom: 8px;
}

.file-name {
  color: #a8b2d1;
  font-family: 'Consolas', monospace;
  font-size: 13px;
}

.file-size {
  color: #667eea;
  font-size: 12px;
}

@media (max-width: 768px) {
  .controls {
    grid-template-columns: 1fr;
  }
}
</style>
</head>
<body>

<div id="setup">
  <h1>ðŸ“± Chat com IA - Gerador de PWA</h1>
  
  <label for="groqKey">Groq API Key:</label>
  <input id="groqKey" type="password" placeholder="Cole sua chave API aqui">
  
  <label for="model">Modelo de IA:</label>
  <select id="model">
    <option value="llama-3.3-70b-versatile">Llama 3.3 70B Versatile (Recomendado)</option>
    <option value="llama-3.1-70b-versatile">Llama 3.1 70B Versatile</option>
    <option value="llama-3.1-8b-instant" selected>Llama 3.1 8B Instant</option>
    <option value="mixtral-8x7b-32768">Mixtral 8x7B</option>
    <option value="gemma2-9b-it">Gemma 2 9B</option>
  </select>
  
  <label for="system">Prompt do Sistema:</label>
  <textarea id="system" rows="6">VocÃª Ã© um assistente especializado em criar aplicativos web progressivos (PWA). Quando solicitado, crie cÃ³digos HTML completos e funcionais, sempre usando apenas HTML, CSS e JavaScript vanilla. NÃ£o use frameworks externos ou bibliotecas que precisem de instalaÃ§Ã£o. Certifique-se de que o cÃ³digo seja responsivo e funcione bem em dispositivos mÃ³veis. O cÃ³digo deve ser otimizado para ser transformado em PWA instalÃ¡vel.</textarea>
  
  <button class="btn-primary" onclick="initChat()">Iniciar Chat</button>
</div>

<div id="chat">
  <h1>ðŸ“± Conversa com IA</h1>
  
  <div id="messages"></div>
  
  <textarea id="input" rows="3" placeholder="Digite sua mensagem... Ex: 'Crie um app de calculadora' ou 'FaÃ§a um app de notas'"></textarea>
  
  <div class="controls">
    <button class="btn-primary" onclick="sendMessage()">Enviar Mensagem</button>
    <button class="btn-secondary" onclick="resetMemory()">Limpar Conversa</button>
  </div>
</div>

<div id="pwaModal" class="pwa-modal">
  <div class="pwa-modal-content">
    <h2>ðŸ“± Gerar PWA InstalÃ¡vel</h2>
    <p style="color: #a8b2d1; margin-bottom: 20px;">Configure seu Progressive Web App:</p>
    
    <label for="appName">Nome do App:</label>
    <input id="appName" type="text" placeholder="Meu App IncrÃ­vel" value="Meu App">
    
    <label for="appShortName">Nome Curto (para Ã­cone):</label>
    <input id="appShortName" type="text" placeholder="App" value="App">
    
    <label for="appDescription">DescriÃ§Ã£o:</label>
    <textarea id="appDescription" rows="3" placeholder="DescriÃ§Ã£o do seu aplicativo">Um aplicativo incrÃ­vel criado com IA</textarea>
    
    <label for="themeColor">Cor do Tema:</label>
    <div class="color-picker">
      <input id="themeColor" type="color" value="#667eea">
      <input type="text" id="themeColorText" value="#667eea" style="width: 100px;" readonly>
    </div>
    
    <label for="bgColor">Cor de Fundo:</label>
    <div class="color-picker">
      <input id="bgColor" type="color" value="#ffffff">
      <input type="text" id="bgColorText" value="#ffffff" style="width: 100px;" readonly>
    </div>
    
    <div class="progress-bar" id="progressBar">
      <div class="progress-fill" id="progressFill">0%</div>
    </div>
    
    <div class="file-preview" id="filePreview">
      <h3 style="color: #38ef7d; margin-bottom: 10px; font-size: 16px;">ðŸ“¦ Arquivos Gerados:</h3>
      <div id="fileList"></div>
    </div>
    
    <div class="btn-row">
      <button class="btn-success" onclick="generatePWA()">Gerar PWA</button>
      <button class="btn-secondary" onclick="closePWAModal()">Cancelar</button>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
let config={}, memory=[], summary="";
let currentCode = "";
const msgBox=document.getElementById("messages")
const input=document.getElementById("input")

// Atualizar preview de cores
document.getElementById('themeColor').addEventListener('input', (e) => {
  document.getElementById('themeColorText').value = e.target.value;
});

document.getElementById('bgColor').addEventListener('input', (e) => {
  document.getElementById('bgColorText').value = e.target.value;
});

function initChat(){
  config={
    key:document.getElementById("groqKey").value.trim(),
    model:document.getElementById("model").value.trim(),
    system:document.getElementById("system").value.trim()
  }
  
  if(!config.key){
    alert("Por favor, insira sua chave API!")
    return
  }
  
  document.getElementById("setup").style.display="none"
  document.getElementById("chat").style.display="block"
  add("bot","OlÃ¡! Posso criar aplicativos web para vocÃª que podem ser instalados no celular como apps nativos (PWA). PeÃ§a algo como: 'Crie um app de calculadora', 'FaÃ§a um app de lista de tarefas' ou 'Crie um cronÃ´metro'. Depois, vocÃª poderÃ¡ baixar todos os arquivos e hospedar em qualquer servidor! ðŸ“±âœ¨")
}

function parseMarkdown(text) {
  const parts = [];
  const codeBlockRegex = /```(\w+)?\n([\s\S]*?)```/g;
  let lastIndex = 0;
  let match;

  while ((match = codeBlockRegex.exec(text)) !== null) {
    if (match.index > lastIndex) {
      parts.push({ type: 'text', content: text.slice(lastIndex, match.index) });
    }
    parts.push({ type: 'code', lang: match[1] || 'code', content: match[2].trim() });
    lastIndex = match.index + match[0].length;
  }

  if (lastIndex < text.length) {
    parts.push({ type: 'text', content: text.slice(lastIndex) });
  }

  return parts.length > 0 ? parts : [{ type: 'text', content: text }];
}

function createCodeBlock(lang, code) {
  const container = document.createElement('div');
  container.className = 'code-block';

  const header = document.createElement('div');
  header.className = 'code-header';

  const langLabel = document.createElement('span');
  langLabel.className = 'code-lang';
  langLabel.textContent = lang;

  const actions = document.createElement('div');
  actions.className = 'code-actions';

  const copyBtn = document.createElement('button');
  copyBtn.className = 'copy-btn';
  copyBtn.textContent = 'Copiar';
  copyBtn.onclick = () => {
    navigator.clipboard.writeText(code);
    copyBtn.textContent = 'Copiado!';
    setTimeout(() => copyBtn.textContent = 'Copiar', 2000);
  };

  actions.appendChild(copyBtn);

  if (lang.toLowerCase() === 'html' && code.includes('<html')) {
    const pwaBtn = document.createElement('button');
    pwaBtn.className = 'pwa-btn';
    pwaBtn.textContent = 'ðŸ“± Gerar PWA';
    pwaBtn.onclick = () => openPWAModal(code);
    actions.appendChild(pwaBtn);
  }

  header.appendChild(langLabel);
  header.appendChild(actions);

  const codeContent = document.createElement('pre');
  codeContent.className = 'code-content';
  codeContent.textContent = code;

  container.appendChild(header);
  container.appendChild(codeContent);

  return container;
}

function add(role, content) {
  const d = document.createElement("div");
  d.className = "msg " + role;

  if (role === 'bot') {
    const parts = parseMarkdown(content);
    parts.forEach(part => {
      if (part.type === 'code') {
        d.appendChild(createCodeBlock(part.lang, part.content));
      } else {
        const textNode = document.createElement('span');
        textNode.textContent = part.content;
        d.appendChild(textNode);
      }
    });
  } else {
    d.textContent = content;
  }

  msgBox.appendChild(d);
  msgBox.scrollTop = msgBox.scrollHeight;
}

function addSystemMsg(content) {
  const d = document.createElement("div");
  d.className = "msg system-msg";
  d.textContent = content;
  msgBox.appendChild(d);
  msgBox.scrollTop = msgBox.scrollHeight;
}

function resetMemory(){
  memory=[]
  summary=""
  msgBox.innerHTML=""
  add("bot","Conversa limpa! Como posso ajudar?")
}

async function summarize(){
  try {
    addSystemMsg("ðŸ“ Resumindo conversa para economizar tokens...");
    
    const r=await fetch("https://api.groq.com/openai/v1/chat/completions",{
      method:"POST",
      headers:{"Authorization":"Bearer "+config.key,"Content-Type":"application/json"},
      body:JSON.stringify({
        model:config.model,
        messages:[{role:"system",content:"Resuma as mensagens a seguir de forma concisa, mantendo apenas as informaÃ§Ãµes mais importantes e o contexto essencial da conversa. Use no mÃ¡ximo 150 tokens."},...memory],
        max_tokens:150,
        temperature:0.3
      })
    })
    const j=await r.json()
    if(j.choices && j.choices[0]) {
      summary=j.choices[0].message.content
      memory=[]
      addSystemMsg("âœ… Conversa resumida com sucesso!");
    }
  } catch(err) {
    console.error("Erro ao resumir:", err)
    addSystemMsg("âš ï¸ Erro ao resumir conversa");
  }
}

async function sendMessage(){
  const text=input.value.trim()
  if(!text)return
  input.value=""
  add("user",text)

  memory.push({role:"user",content:text})

  if(memory.length >= 18 && !summary) {
    await summarize()
  }

  const payload=[
    {role:"system",content:config.system},
    summary ? {role:"system",content:"Resumo da conversa anterior:\n"+summary} : null,
    ...memory
  ].filter(Boolean)

  try {
    const r=await fetch("https://api.groq.com/openai/v1/chat/completions",{
      method:"POST",
      headers:{"Authorization":"Bearer "+config.key,"Content-Type":"application/json"},
      body:JSON.stringify({model:config.model,messages:payload,temperature:0.7,max_tokens:2000})
    })

    const j=await r.json()
    
    if(j.error) {
      add("bot", "Erro: " + j.error.message)
      return
    }
    
    if(!j.choices || !j.choices[0]) {
      add("bot", "Erro: resposta invÃ¡lida da API")
      return
    }
    
    const reply=j.choices[0].message.content.trim()
    add("bot",reply)
    memory.push({role:"assistant",content:reply})

  } catch(err) {
    add("bot", "Erro na comunicaÃ§Ã£o: " + err.message)
  }
}

function openPWAModal(code) {
  currentCode = code;
  document.getElementById('pwaModal').classList.add('active');
}

function closePWAModal() {
  document.getElementById('pwaModal').classList.remove('active');
  document.getElementById('progressBar').classList.remove('active');
  document.getElementById('filePreview').classList.remove('active');
  document.getElementById('progressFill').style.width = '0%';
  document.getElementById('progressFill').textContent = '0%';
}

function generateIcon(size, color) {
  const canvas = document.createElement('canvas');
  canvas.width = size;
  canvas.height = size;
  const ctx = canvas.getContext('2d');
  
  const gradient = ctx.createLinearGradient(0, 0, size, size);
  gradient.addColorStop(0, color);
  gradient.addColorStop(1, adjustColor(color, -30));
  
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, size, size);
  
  ctx.fillStyle = '#ffffff';
  ctx.font = `bold ${size * 0.5}px Arial`;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('ðŸ“±', size / 2, size / 2);
  
  return canvas.toDataURL('image/png');
}

function adjustColor(color, amount) {
  const num = parseInt(color.replace('#', ''), 16);
  const r = Math.max(0, Math.min(255, (num >> 16) + amount));
  const g = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amount));
  const b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount));
  return '#' + ((r << 16) | (g << 8) | b).toString(16).padStart(6, '0');
}

async function generatePWA() {
  const appName = document.getElementById('appName').value.trim();
  const appShortName = document.getElementById('appShortName').value.trim();
  const appDescription = document.getElementById('appDescription').value.trim();
  const themeColor = document.getElementById('themeColor').value;
  const bgColor = document.getElementById('bgColor').value;

  if (!appName || !appShortName) {
    alert('Preencha pelo menos o nome do app!');
    return;
  }

  const progressBar = document.getElementById('progressBar');
  const progressFill = document.getElementById('progressFill');
  const filePreview = document.getElementById('filePreview');
  const fileList = document.getElementById('fileList');
  
  progressBar.classList.add('active');
  fileList.innerHTML = '';
  
  const zip = new JSZip();
  const files = [];

  // 1. index.html
  progressFill.style.width = '20%';
  progressFill.textContent = 'Gerando index.html...';
  await sleep(300);
  
  zip.file('index.html', currentCode);
  files.push({ name: 'index.html', size: formatBytes(currentCode.length) });

  // 2. manifest.json
  progressFill.style.width = '40%';
  progressFill.textContent = 'Criando manifest.json...';
  await sleep(300);
  
  const manifest = {
    name: appName,
    short_name: appShortName,
    description: appDescription,
    start_url: "./index.html",
    display: "standalone",
    background_color: bgColor,
    theme_color: themeColor,
    orientation: "portrait-primary",
    icons: [
      { src: "icon-192.png", sizes: "192x192", type: "image/png" },
      { src: "icon-512.png", sizes: "512x512", type: "image/png" }
    ]
  };
  
  const manifestStr = JSON.stringify(manifest, null, 2);
  zip.file('manifest.json', manifestStr);
  files.push({ name: 'manifest.json', size: formatBytes(manifestStr.length) });

  // 3. Service Worker
  progressFill.style.width = '60%';
  progressFill.textContent = 'Gerando service-worker.js...';
  await sleep(300);
  
  const serviceWorker = `
const CACHE_NAME = '${appShortName.toLowerCase()}-v1';
const urlsToCache = [
  './',
  './index.html',
  './manifest.json'
];

self.addEventListener('install', event => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(cache => cache.addAll(urlsToCache))
  );
});

self.addEventListener('fetch', event => {
  event.respondWith(
    caches.match(event.request)
      .then(response => response || fetch(event.request))
  );
});

self.addEventListener('activate', event => {
  event.waitUntil(
    caches.keys().then(cacheNames => {
      return Promise.all(
        cacheNames.map(cacheName => {
          if (cacheName !== CACHE_NAME) {
            return caches.delete(cacheName);
          }
        })
      );
    })
  );
});`;
  
  zip.file('service-worker.js', serviceWorker);
  files.push({ name: 'service-worker.js', size: formatBytes(serviceWorker.length) });

  // 4. Ãcones
  progressFill.style.width = '80%';
  progressFill.textContent = 'Gerando Ã­cones...';
  await sleep(300);
  
  const icon192 = generateIcon(192, themeColor);
  const icon512 = generateIcon(512, themeColor);
  
  zip.file('icon-192.png', icon192.split(',')[1], {base64: true});
  zip.file('icon-512.png', icon512.split(',')[1], {base64: true});
  files.push({ name: 'icon-192.png', size: '~15 KB' });
  files.push({ name: 'icon-512.png', size: '~45 KB' });

  // 5. README
  progressFill.style.width = '90%';
  progressFill.textContent = 'Criando instruÃ§Ãµes...';
  await sleep(300);
  
  const readme = `# ${appName}

${appDescription}

## ðŸ“± Como Instalar no Android/iOS

### OpÃ§Ã£o 1: Hospedagem Online (Recomendado)

1. **GitHub Pages (GrÃ¡tis)**:
   - Crie um repositÃ³rio no GitHub
   - FaÃ§a upload de todos os arquivos
   - Ative GitHub Pages nas configuraÃ§Ãµes
   - Acesse pelo celular: https://seuusuario.github.io/seurepositorio
   - Clique em "Adicionar Ã  tela inicial"

2. **Netlify ou Vercel (GrÃ¡tis)**:
   - Crie conta em netlify.com ou vercel.com
   - Arraste a pasta do projeto
   - Acesse a URL gerada pelo celular
   - Instale como app

### OpÃ§Ã£o 2: Teste Local

1. Instale "Web Server for Chrome" ou similar
2. Abra os arquivos localmente
3. Acesse pelo IP local no celular

## ðŸŽ¯ Recursos PWA

âœ… Funciona offline
âœ… InstalÃ¡vel como app nativo
âœ… Ãcone na tela inicial
âœ… Tela cheia (sem barra do navegador)
âœ… NotificaÃ§Ãµes (se implementado)

## ðŸ”§ Arquivos IncluÃ­dos

- index.html - Seu aplicativo
- manifest.json - ConfiguraÃ§Ãµes PWA
- service-worker.js - Funcionalidade offline
- icon-192.png e icon-512.png - Ãcones do app

## ðŸ“ ObservaÃ§Ãµes

- Requer HTTPS para funcionar (GitHub Pages/Netlify jÃ¡ tem)
- Teste no Chrome/Edge/Safari mobile
- Para atualizar, altere a versÃ£o no service-worker.js

Desenvolvido com â¤ï¸ usando IA
`;
  
  zip.file('README.md', readme);
  files.push({ name: 'README.md', size: formatBytes(readme.length) });

  // Finalizar
  progressFill.style.width = '100%';
  progressFill.textContent = 'Empacotando arquivos...';
  await sleep(500);

  // Mostrar preview dos arquivos
  filePreview.classList.add('active');
  files.forEach(file => {
    const item = document.createElement('div');
    item.className = 'file-item';
    item.innerHTML = `
      <span class="file-name">ðŸ“„ ${file.name}</span>
      <span class="file-size">${file.size}</span>
    `;
    fileList.appendChild(item);
  });

  // Gerar ZIP
  const blob = await zip.generateAsync({type: 'blob'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = appShortName.toLowerCase().replace(/\s+/g, '-') + '-pwa.zip';
  a.click();
  URL.revokeObjectURL(url);

  progressFill.textContent = 'âœ… PWA Gerado com Sucesso!';
  
  addSystemMsg(`âœ… PWA "${appName}" gerado! ${files.length} arquivos baixados. Veja o README.md para instruÃ§Ãµes de instalaÃ§Ã£o.`);
}

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function formatBytes(bytes) {
  if (bytes < 1024) return bytes + ' B';
  if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
  return (bytes / 1048576).toFixed(1) + ' MB';
}

input.addEventListener("keypress", (e) => {
  if(e.key === "Enter" && !e.shiftKey) {
    e.preventDefault()
    sendMessage()
  }
})
</script>

</body>
</html>